import{d as j,g as H,m as q,n as G,o as W,r as $}from"./chunk-T73IIDAP.js";import{a as D,b as Q}from"./chunk-BDFVN7RY.js";import{k as Z}from"./chunk-LHASCYSG.js";import{$ as a,B as r,C as h,F as w,G as P,L as u,O as L,P as m,Q as t,R as i,S as x,W as O,X as g,Z as d,_ as V,aa as p,ba as v,ca as R,da as k,e as C,ea as F,fa as T,ha as S,ia as I,ja as B,q as b,r as M,ra as y,s as f,sa as A,t as _,ta as N,ua as U,va as E,x as z}from"./chunk-QAP2ZFBM.js";function te(s,n){if(s&1){let e=O();t(0,"button",37),g("click",function(){b(e);let c=d().$implicit,l=d(2);return M(l.toggleFavorito(c))}),f(),t(1,"svg",38),x(2,"path",39),i()()}if(s&2){let e=d().$implicit,o=d(2);V("favorito-activo",o.esFavorita(e.id)),m("title",T(o.esFavorita(e.id)?"Quitar de favoritos":"Agregar a favoritos")),r(),L("fill",o.esFavorita(e.id)?"#ff0000":"none")}}function ie(s,n){if(s&1&&(t(0,"div",40),a(1),S(2,"date"),i()),s&2){let e=d().$implicit;r(),v(" Publicado: ",B(2,1,e.createdAt.toDate(),"dd/MM/yyyy")," ")}}function ne(s,n){if(s&1){let e=O();t(0,"div",41)(1,"button",42),g("click",function(){b(e);let c=d().$implicit,l=d(2);return M(l.editarReceta.emit(c))}),f(),t(2,"svg",43),x(3,"path",44),i(),a(4," Editar "),i(),_(),t(5,"button",45),g("click",function(){b(e);let c=d().$implicit,l=d(2);return M(l.confirmarEliminar(c))}),f(),t(6,"svg",43),x(7,"path",46),i(),a(8," Eliminar "),i()()}}function oe(s,n){if(s&1){let e=O();t(0,"div",23),u(1,te,3,5,"button",24),t(2,"div",25)(3,"div",26),a(4),i(),t(5,"div",27),f(),t(6,"svg",28),x(7,"path",29),i(),a(8),S(9,"tiempo"),i()(),_(),t(10,"h3",30),a(11),S(12,"uppercase"),i(),t(13,"div",31),a(14),i(),u(15,ie,3,4,"div",32),t(16,"div",33)(17,"div",34)(18,"strong"),a(19),i(),a(20," ingredientes "),i(),t(21,"div",34)(22,"strong"),a(23),i(),a(24," pasos "),i()(),t(25,"button",35),g("click",function(){let c=b(e).$implicit,l=d(2);return M(l.verReceta.emit(c))}),a(26," Ver receta completa "),i(),u(27,ne,9,0,"div",36),i()}if(s&2){let e=n.$implicit,o=d(2);r(),m("ngIf",o.currentUserId),r(3),p(e.categoria),r(4),v(" ",I(9,9,e.tiempo_preparacion)," "),r(3),p(I(12,11,e.titulo)),r(3),v(" Por: ",e.userEmail," "),r(),m("ngIf",e.createdAt),r(4),p(e.ingredientes.length),r(4),p(e.pasos.length),r(4),m("ngIf",o.currentUserId&&e.userId===o.currentUserId)}}function ae(s,n){if(s&1&&(t(0,"div",21),u(1,oe,28,13,"div",22),i()),s&2){let e=d();r(),m("ngForOf",e.recetasFiltradas)}}function re(s,n){if(s&1&&(t(0,"div",47),f(),t(1,"svg",48),x(2,"path",39),i(),_(),t(3,"h3"),a(4),i(),t(5,"p"),a(6),i()()),s&2){let e=d();r(4),p(e.soloFavoritos?"No tienes favoritos":"No hay recetas disponibles"),r(2),p(e.soloFavoritos?"Agrega recetas a favoritos para verlas aqu\xED":"S\xE9 el primero en compartir una receta deliciosa")}}var J=class s{constructor(n,e){this.recetasService=n;this.favoritosService=e}recetas=[];currentUserId;soloFavoritos=!1;soloPublicaciones=!1;terminoBusqueda="";verReceta=new h;editarReceta=new h;eliminarReceta=new h;filtroCategoria="";recetasFiltradas=[];favoritos=[];ordenActual="reciente";ngOnInit(){return C(this,null,function*(){yield this.cargarFavoritos(),this.filtrarRecetas()})}ngOnChanges(n){(n.soloFavoritos||n.soloPublicaciones||n.recetas||n.terminoBusqueda)&&this.cargarFavoritos().then(()=>{this.filtrarRecetas()})}cargarFavoritos(){return C(this,null,function*(){this.currentUserId&&(this.favoritos=yield this.favoritosService.obtenerFavoritosPorUsuario(this.currentUserId))})}filtrarRecetas(){let n=this.recetas;if(this.soloFavoritos&&this.currentUserId){let e=this.favoritos.map(o=>o.recetaId);n=this.recetas.filter(o=>e.includes(o.id||""))}else this.soloPublicaciones&&this.currentUserId&&(n=this.recetas.filter(e=>e.userId===this.currentUserId));if(this.terminoBusqueda.trim()){let e=this.terminoBusqueda.toLowerCase();n=n.filter(o=>o.titulo.toLowerCase().includes(e)||o.categoria.toLowerCase().includes(e)||o.ingredientes.some(c=>c.toLowerCase().includes(e)))}this.filtroCategoria?this.recetasFiltradas=n.filter(e=>e.categoria===this.filtroCategoria):this.recetasFiltradas=n,this.ordenarRecetas()}esFavorita(n){return n?this.favoritos.some(e=>e.recetaId===n):!1}toggleFavorito(n){return C(this,null,function*(){if(!this.currentUserId||!n.id){alert("Debes iniciar sesi\xF3n para agregar favoritos");return}let e=this.favoritos.find(o=>o.recetaId===n.id);e&&e.id?yield this.favoritosService.quitarFavorito(e.id):yield this.favoritosService.agregarFavorito(this.currentUserId,n.id),yield this.cargarFavoritos(),this.filtrarRecetas()})}confirmarEliminar(n){return C(this,null,function*(){confirm(`\xBFEst\xE1s seguro de eliminar "${n.titulo}"?`)&&this.eliminarReceta.emit(n)})}ordenarRecetas(){switch(this.ordenActual){case"reciente":this.recetasFiltradas.sort((n,e)=>{let o=n.createdAt?.toMillis()||0;return(e.createdAt?.toMillis()||0)-o});break;case"antiguo":this.recetasFiltradas.sort((n,e)=>{let o=n.createdAt?.toMillis()||0,c=e.createdAt?.toMillis()||0;return o-c});break;case"az":this.recetasFiltradas.sort((n,e)=>n.titulo.localeCompare(e.titulo));break;case"za":this.recetasFiltradas.sort((n,e)=>e.titulo.localeCompare(n.titulo));break;case"rapido":this.recetasFiltradas.sort((n,e)=>n.tiempo_preparacion-e.tiempo_preparacion);break;case"lento":this.recetasFiltradas.sort((n,e)=>e.tiempo_preparacion-n.tiempo_preparacion);break}}static \u0275fac=function(e){return new(e||s)(w(Z),w(Q))};static \u0275cmp=P({type:s,selectors:[["app-lista-recetas"]],inputs:{recetas:"recetas",currentUserId:"currentUserId",soloFavoritos:"soloFavoritos",soloPublicaciones:"soloPublicaciones",terminoBusqueda:"terminoBusqueda"},outputs:{verReceta:"verReceta",editarReceta:"editarReceta",eliminarReceta:"eliminarReceta"},features:[z],decls:37,vars:5,consts:[[1,"recetas-container"],[1,"recetas-header"],[1,"filtros"],[3,"ngModelChange","change","ngModel"],["value",""],["value","Desayuno"],["value","Almuerzo"],["value","Cena"],["value","Postre"],["value","Bebida"],["value","Entrada"],["value","Snack"],[1,"orden-select",3,"ngModelChange","change","ngModel"],["value","reciente"],["value","antiguo"],["value","az"],["value","za"],["value","rapido"],["value","lento"],["class","recetas-grid",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"recetas-grid"],["class","receta-card",4,"ngFor","ngForOf"],[1,"receta-card"],["class","favorito-btn",3,"favorito-activo","title","click",4,"ngIf"],[1,"receta-header"],[1,"receta-categoria"],[1,"receta-tiempo"],["viewBox","0 0 24 24","fill","currentColor","width","16","height","16"],["d","M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"],[1,"receta-titulo"],[1,"receta-autor"],["class","receta-fecha",4,"ngIf"],[1,"receta-info"],[1,"info-item"],[1,"ver-btn",3,"click"],["class","receta-actions",4,"ngIf"],[1,"favorito-btn",3,"click","title"],["viewBox","0 0 24 24","stroke","currentColor","stroke-width","2"],["d","M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"],[1,"receta-fecha"],[1,"receta-actions"],[1,"edit-btn",3,"click"],["viewBox","0 0 24 24","fill","currentColor"],["d","M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"],[1,"delete-btn",3,"click"],["d","M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"],[1,"empty-state"],["viewBox","0 0 24 24","fill","currentColor","width","64","height","64"]],template:function(e,o){e&1&&(t(0,"div",0)(1,"div",1)(2,"h2"),a(3),i(),t(4,"div",2)(5,"select",3),F("ngModelChange",function(l){return k(o.filtroCategoria,l)||(o.filtroCategoria=l),l}),g("change",function(){return o.filtrarRecetas()}),t(6,"option",4),a(7,"Todas las categor\xEDas"),i(),t(8,"option",5),a(9,"Desayuno"),i(),t(10,"option",6),a(11,"Almuerzo"),i(),t(12,"option",7),a(13,"Cena"),i(),t(14,"option",8),a(15,"Postre"),i(),t(16,"option",9),a(17,"Bebida"),i(),t(18,"option",10),a(19,"Entrada"),i(),t(20,"option",11),a(21,"Snack"),i()(),t(22,"select",12),F("ngModelChange",function(l){return k(o.ordenActual,l)||(o.ordenActual=l),l}),g("change",function(){return o.ordenarRecetas()}),t(23,"option",13),a(24,"M\xE1s recientes"),i(),t(25,"option",14),a(26,"M\xE1s antiguos"),i(),t(27,"option",15),a(28,"Nombre (A-Z)"),i(),t(29,"option",16),a(30,"Nombre (Z-A)"),i(),t(31,"option",17),a(32,"M\xE1s r\xE1pidas"),i(),t(33,"option",18),a(34,"M\xE1s lentas"),i()()()(),u(35,ae,2,1,"div",19)(36,re,7,2,"div",20),i()),e&2&&(r(3),p(o.soloFavoritos?"Mis Favoritos":o.soloPublicaciones?"Mis Publicaciones":"Todas las Recetas"),r(2),R("ngModel",o.filtroCategoria),r(17),R("ngModel",o.ordenActual),r(13),m("ngIf",o.recetasFiltradas.length>0),r(),m("ngIf",o.recetasFiltradas.length===0))},dependencies:[E,y,A,$,G,W,q,j,H,N,U,D],styles:[".recetas-container[_ngcontent-%COMP%]{padding:24px}.recetas-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.recetas-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:28px;font-weight:500;color:#0f0f0f}.filtros[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:10px 16px;border:1px solid #ccc;border-radius:8px;font-size:14px;cursor:pointer}.recetas-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:24px}.receta-card[_ngcontent-%COMP%]{position:relative;background:#fff;border:1px solid #e5e5e5;border-radius:12px;padding:20px;transition:box-shadow .2s}.receta-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #0000001a}.favorito-btn[_ngcontent-%COMP%]{position:absolute;top:12px;right:12px;width:40px;height:40px;border:none;background:#fff;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 8px #0000001a;transition:all .2s;z-index:10}.favorito-btn[_ngcontent-%COMP%]:hover{transform:scale(1.1);box-shadow:0 4px 12px #00000026}.favorito-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px;color:#606060;transition:all .2s}.favorito-btn.favorito-activo[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:red;transform:scale(1.1)}.receta-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.receta-categoria[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;background:#e8f5e9;color:#2e7d32;border-radius:16px;font-size:12px;font-weight:500}.receta-tiempo[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;color:#606060;font-size:14px}.receta-titulo[_ngcontent-%COMP%]{margin:0 0 8px;font-size:20px;font-weight:500;color:#0f0f0f}.receta-autor[_ngcontent-%COMP%]{font-size:13px;color:#606060;margin-bottom:16px}.receta-info[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:16px;padding:12px;background:#f9f9f9;border-radius:8px}.info-item[_ngcontent-%COMP%]{font-size:14px;color:#606060}.info-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#0f0f0f}.ver-btn[_ngcontent-%COMP%]{width:100%;padding:10px;border:none;background:#065fd4;color:#fff;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:background .2s;margin-bottom:12px}.ver-btn[_ngcontent-%COMP%]:hover{background:#0550b8}.receta-actions[_ngcontent-%COMP%]{display:flex;gap:8px}.edit-btn[_ngcontent-%COMP%], .delete-btn[_ngcontent-%COMP%]{flex:1;padding:8px;border:none;border-radius:8px;font-size:13px;font-weight:500;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:4px;transition:background .2s}.edit-btn[_ngcontent-%COMP%]{background:#e3f2fd;color:#1976d2}.edit-btn[_ngcontent-%COMP%]:hover{background:#bbdefb}.delete-btn[_ngcontent-%COMP%]{background:#ffebee;color:#d32f2f}.delete-btn[_ngcontent-%COMP%]:hover{background:#ffcdd2}.edit-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .delete-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:64px 24px;color:#606060}.empty-state[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-bottom:16px;opacity:.5}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:20px;color:#0f0f0f}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px}.orden-select[_ngcontent-%COMP%]{padding:10px 16px;border:1px solid #ccc;border-radius:8px;font-size:14px;cursor:pointer;margin-left:12px}"]})};function se(s,n){if(s&1&&(t(0,"div",16)(1,"span",17),a(2,"\u2022"),i(),t(3,"span"),a(4),i()()),s&2){let e=n.$implicit;r(4),p(e)}}function ce(s,n){if(s&1&&(t(0,"div",18)(1,"span",19),a(2),i(),t(3,"p"),a(4),i()()),s&2){let e=n.$implicit,o=n.index;r(2),p(o+1),r(2),p(e)}}var K=class s{receta;close=new h;static \u0275fac=function(e){return new(e||s)};static \u0275cmp=P({type:s,selectors:[["app-ver-receta"]],inputs:{receta:"receta"},outputs:{close:"close"},decls:28,vars:6,consts:[[1,"modal-overlay",3,"click"],[1,"modal-container",3,"click"],[1,"modal-header"],[1,"categoria"],[1,"autor"],[1,"close-btn",3,"click"],["viewBox","0 0 24 24","fill","currentColor"],["d","M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"],[1,"modal-content"],[1,"tiempo-badge"],["d","M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"],[1,"section"],[1,"ingredientes-list"],["class","ingrediente-item",4,"ngFor","ngForOf"],[1,"pasos-list"],["class","paso-item",4,"ngFor","ngForOf"],[1,"ingrediente-item"],[1,"bullet"],[1,"paso-item"],[1,"paso-numero"]],template:function(e,o){e&1&&(t(0,"div",0),g("click",function(){return o.close.emit()}),t(1,"div",1),g("click",function(l){return l.stopPropagation()}),t(2,"div",2)(3,"div")(4,"span",3),a(5),i(),t(6,"h2"),a(7),i(),t(8,"p",4),a(9),i()(),t(10,"button",5),g("click",function(){return o.close.emit()}),f(),t(11,"svg",6),x(12,"path",7),i()()(),_(),t(13,"div",8)(14,"div",9),f(),t(15,"svg",6),x(16,"path",10),i(),a(17),i(),_(),t(18,"section",11)(19,"h3"),a(20,"Ingredientes"),i(),t(21,"div",12),u(22,se,5,1,"div",13),i()(),t(23,"section",11)(24,"h3"),a(25,"Preparaci\xF3n"),i(),t(26,"div",14),u(27,ce,5,2,"div",15),i()()()()()),e&2&&(r(5),p(o.receta.categoria),r(2),p(o.receta.titulo),r(2),v("Por: ",o.receta.userEmail),r(8),v(" ",o.receta.tiempo_preparacion," minutos "),r(5),m("ngForOf",o.receta.ingredientes),r(5),m("ngForOf",o.receta.pasos))},dependencies:[E,y],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000;padding:20px}.modal-container[_ngcontent-%COMP%]{background:#fff;border-radius:12px;width:100%;max-width:800px;max-height:90vh;overflow-y:auto;box-shadow:0 8px 32px #0003}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;padding:24px;border-bottom:1px solid #e5e5e5;position:sticky;top:0;background:#fff;z-index:1}.categoria[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;background:#e8f5e9;color:#2e7d32;border-radius:16px;font-size:12px;font-weight:500;margin-bottom:8px}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 8px;font-size:28px;font-weight:500;color:#0f0f0f}.autor[_ngcontent-%COMP%]{margin:0;font-size:14px;color:#606060}.close-btn[_ngcontent-%COMP%]{width:32px;height:32px;border:none;background:transparent;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:background .2s;flex-shrink:0}.close-btn[_ngcontent-%COMP%]:hover{background:#f0f0f0}.close-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px;color:#606060}.modal-content[_ngcontent-%COMP%]{padding:24px}.tiempo-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;padding:12px 20px;background:#f0f7ff;border-radius:8px;color:#065fd4;font-weight:500;margin-bottom:24px}.tiempo-badge[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.section[_ngcontent-%COMP%]{margin-bottom:32px}.section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 16px;font-size:20px;font-weight:500;color:#0f0f0f}.ingredientes-list[_ngcontent-%COMP%], .pasos-list[_ngcontent-%COMP%]{margin:0;padding-left:24px}.ingredientes-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .pasos-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:12px;line-height:1.6;color:#0f0f0f}.pasos-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:16px}.ingredientes-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.ingrediente-item[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:flex-start;padding:12px;background:#f9f9f9;border-radius:8px;font-size:16px;line-height:1.6}.bullet[_ngcontent-%COMP%]{font-size:24px;color:#2e7d32;font-weight:700;line-height:1.4}.pasos-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}.paso-item[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:flex-start}.paso-numero[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-width:32px;height:32px;background:#065fd4;color:#fff;border-radius:50%;font-weight:600;font-size:16px;flex-shrink:0}.paso-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;padding-top:4px;font-size:16px;line-height:1.8;color:#0f0f0f}"]})};export{J as a,K as b};
