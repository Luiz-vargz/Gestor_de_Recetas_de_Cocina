import{a as w,b as H}from"./chunk-XECDBXTZ.js";import"./chunk-T73IIDAP.js";import"./chunk-BDFVN7RY.js";import{a as y,k as b,l as q}from"./chunk-LHASCYSG.js";import{B as l,F as a,G as f,L as R,P as s,Q as p,R as m,W as h,X as u,Z as d,e as n,q as v,r as _,sa as S,va as g,xa as C,za as I}from"./chunk-QAP2ZFBM.js";function T(o,e){if(o&1){let t=h();p(0,"app-ver-receta",3),u("close",function(){v(t);let c=d();return _(c.recetaSeleccionada=null)}),m()}if(o&2){let t=d();s("receta",t.recetaSeleccionada)}}var M=class o{constructor(e,t,r,c,i){this.recetasService=e;this.authService=t;this.route=r;this.router=c;this.modalService=i;this.authService.user$.subscribe(A=>{this.currentUser=A})}recetas=[];currentUser=null;terminoBusqueda="";recetaSeleccionada=null;ngOnInit(){return n(this,null,function*(){yield this.cargarRecetas(),this.route.queryParams.subscribe(e=>{this.terminoBusqueda=e.busqueda||""})})}cargarRecetas(){return n(this,null,function*(){this.recetas=yield this.recetasService.obtenerRecetas()})}verDetalleReceta(e){e.id&&this.router.navigate(["/receta",e.id])}editarReceta(e){this.modalService.abrirEditarReceta(e)}eliminarReceta(e){return n(this,null,function*(){if(e.id)try{yield this.recetasService.eliminarReceta(e.id),yield this.cargarRecetas()}catch{alert("Error al eliminar la receta")}})}static \u0275fac=function(t){return new(t||o)(a(b),a(y),a(C),a(I),a(q))};static \u0275cmp=f({type:o,selectors:[["app-home"]],decls:3,vars:6,consts:[[1,"page-container"],[3,"verReceta","editarReceta","eliminarReceta","recetas","currentUserId","terminoBusqueda","soloFavoritos","soloPublicaciones"],[3,"receta","close",4,"ngIf"],[3,"close","receta"]],template:function(t,r){t&1&&(p(0,"div",0)(1,"app-lista-recetas",1),u("verReceta",function(i){return r.verDetalleReceta(i)})("editarReceta",function(i){return r.editarReceta(i)})("eliminarReceta",function(i){return r.eliminarReceta(i)}),m(),R(2,T,1,1,"app-ver-receta",2),m()),t&2&&(l(),s("recetas",r.recetas)("currentUserId",r.currentUser==null?null:r.currentUser.uid)("terminoBusqueda",r.terminoBusqueda)("soloFavoritos",!1)("soloPublicaciones",!1),l(),s("ngIf",r.recetaSeleccionada))},dependencies:[g,S,w,H],styles:[".page-container[_ngcontent-%COMP%]{min-height:100%}"]})};export{M as HomeComponent};
