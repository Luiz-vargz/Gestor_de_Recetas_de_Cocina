import{a as L,b as j}from"./chunk-BDFVN7RY.js";import{a as T,k as U,l as A}from"./chunk-LHASCYSG.js";import{$ as o,B as r,F as m,G as S,L as f,O as w,P as s,Q as i,R as t,S as g,W as M,X as h,Z as p,_ as y,aa as x,ba as b,e as v,ha as P,ia as O,ka as I,q as u,r as _,ra as R,s as d,sa as k,t as C,ta as E,ua as F,va as z,xa as D,za as V}from"./chunk-QAP2ZFBM.js";function B(n,a){if(n&1&&(i(0,"p",20),o(1),P(2,"date"),t()),n&2){let e=p(2);r(),b(" Publicado el ",I(2,1,e.receta.createdAt.toDate(),"dd MMMM yyyy","","es")," ")}}function N(n,a){if(n&1){let e=M();i(0,"button",21),h("click",function(){u(e);let l=p(2);return _(l.toggleFavorito())}),d(),i(1,"svg",22),g(2,"path",23),t(),o(3),t()}if(n&2){let e=p(2);y("favorito-activo",e.esFavorita),r(),w("fill",e.esFavorita?"#ff0000":"none"),r(2),b(" ",e.esFavorita?"Quitar de favoritos":"Agregar a favoritos"," ")}}function $(n,a){if(n&1&&(i(0,"li"),d(),i(1,"svg",4),g(2,"path",24),t(),o(3),t()),n&2){let e=a.$implicit;r(3),b(" ",e," ")}}function Y(n,a){if(n&1&&(i(0,"li")(1,"span",25),o(2),t(),i(3,"p"),o(4),t()()),n&2){let e=a.$implicit,c=a.index;r(2),x(c+1),r(2),x(e)}}function q(n,a){if(n&1){let e=M();i(0,"div",26)(1,"button",27),h("click",function(){u(e);let l=p(2);return _(l.editarReceta())}),d(),i(2,"svg",4),g(3,"path",28),t(),o(4," Editar receta "),t(),C(),i(5,"button",29),h("click",function(){u(e);let l=p(2);return _(l.eliminarReceta())}),d(),i(6,"svg",4),g(7,"path",30),t(),o(8," Eliminar receta "),t()()}}function Q(n,a){if(n&1){let e=M();i(0,"div",2)(1,"button",3),h("click",function(){u(e);let l=p();return _(l.volver())}),d(),i(2,"svg",4),g(3,"path",5),t(),o(4," Volver "),t(),C(),i(5,"div",6)(6,"div",7)(7,"span",8),o(8),t(),i(9,"h1"),o(10),P(11,"uppercase"),t(),i(12,"p",9),o(13),t(),f(14,B,3,6,"p",10),t(),f(15,N,4,4,"button",11),t(),i(16,"div",12),d(),i(17,"svg",4),g(18,"path",13),t(),C(),i(19,"span"),o(20),P(21,"tiempo"),t()(),i(22,"div",14)(23,"section",15)(24,"h2"),o(25,"Ingredientes"),t(),i(26,"ul",16),f(27,$,4,1,"li",17),t()(),i(28,"section",15)(29,"h2"),o(30,"Preparaci\xF3n"),t(),i(31,"ol",18),f(32,Y,5,2,"li",17),t()()(),f(33,q,9,0,"div",19),t()}if(n&2){let e=p();r(8),x(e.receta.categoria),r(2),x(O(11,9,e.receta.titulo)),r(3),b("Por: ",e.receta.userEmail),r(),s("ngIf",e.receta.createdAt),r(),s("ngIf",e.currentUser),r(5),x(O(21,11,e.receta.tiempo_preparacion)),r(7),s("ngForOf",e.receta.ingredientes),r(5),s("ngForOf",e.receta.pasos),r(),s("ngIf",e.currentUser&&e.receta.userId===e.currentUser.uid)}}function J(n,a){n&1&&(i(0,"div",31)(1,"p"),o(2,"Cargando receta..."),t()())}var H=class n{constructor(a,e,c,l,K,W){this.route=a;this.router=e;this.recetasService=c;this.favoritosService=l;this.authService=K;this.modalService=W;this.authService.user$.subscribe(G=>{this.currentUser=G})}receta=null;currentUser=null;esFavorita=!1;favoritoId=null;ngOnInit(){return v(this,null,function*(){let a=this.route.snapshot.paramMap.get("id");a&&(yield this.cargarReceta(a),this.currentUser&&(yield this.verificarFavorito(a)))})}cargarReceta(a){return v(this,null,function*(){let e=yield this.recetasService.obtenerRecetas();this.receta=e.find(c=>c.id===a)||null})}verificarFavorito(a){return v(this,null,function*(){this.currentUser&&(this.favoritoId=yield this.favoritosService.esFavorito(this.currentUser.uid,a),this.esFavorita=this.favoritoId!==null)})}toggleFavorito(){return v(this,null,function*(){if(!this.currentUser||!this.receta?.id){alert("Debes iniciar sesi\xF3n");return}this.esFavorita&&this.favoritoId?(yield this.favoritosService.quitarFavorito(this.favoritoId),this.esFavorita=!1,this.favoritoId=null):(yield this.favoritosService.agregarFavorito(this.currentUser.uid,this.receta.id),yield this.verificarFavorito(this.receta.id))})}volver(){this.router.navigate(["/home"])}editarReceta(){this.receta&&this.modalService.abrirEditarReceta(this.receta)}eliminarReceta(){return v(this,null,function*(){if(this.receta?.id&&confirm(`\xBFEst\xE1s seguro de eliminar "${this.receta.titulo}"?`))try{yield this.recetasService.eliminarReceta(this.receta.id),alert("Receta eliminada correctamente"),this.router.navigate(["/home"])}catch{alert("Error al eliminar la receta")}})}static \u0275fac=function(e){return new(e||n)(m(D),m(V),m(U),m(j),m(T),m(A))};static \u0275cmp=S({type:n,selectors:[["app-detalle-receta"]],decls:2,vars:2,consts:[["class","detalle-container",4,"ngIf"],["class","loading",4,"ngIf"],[1,"detalle-container"],[1,"back-btn",3,"click"],["viewBox","0 0 24 24","fill","currentColor"],["d","M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"],[1,"detalle-header"],[1,"header-content"],[1,"categoria"],[1,"autor"],["class","fecha",4,"ngIf"],["class","favorito-btn-grande",3,"favorito-activo","click",4,"ngIf"],[1,"tiempo-info"],["d","M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"],[1,"detalle-content"],[1,"section"],[1,"ingredientes-list"],[4,"ngFor","ngForOf"],[1,"pasos-list"],["class","acciones",4,"ngIf"],[1,"fecha"],[1,"favorito-btn-grande",3,"click"],["viewBox","0 0 24 24","stroke","currentColor","stroke-width","2"],["d","M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"],["d","M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"],[1,"paso-numero"],[1,"acciones"],[1,"btn-editar",3,"click"],["d","M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"],[1,"btn-eliminar",3,"click"],["d","M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"],[1,"loading"]],template:function(e,c){e&1&&f(0,Q,34,13,"div",0)(1,J,3,0,"div",1),e&2&&(s("ngIf",c.receta),r(),s("ngIf",!c.receta))},dependencies:[z,R,k,E,F,L],styles:[".detalle-container[_ngcontent-%COMP%]{max-width:900px;margin:0 auto;padding:40px 24px}.back-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 16px;border:1px solid #ccc;background:#fff;border-radius:8px;cursor:pointer;font-size:14px;margin-bottom:24px;transition:background .2s}.back-btn[_ngcontent-%COMP%]:hover{background:#f5f5f5}.back-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.detalle-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:24px;margin-bottom:24px;padding-bottom:24px;border-bottom:2px solid #e5e5e5}.header-content[_ngcontent-%COMP%]{flex:1}.categoria[_ngcontent-%COMP%]{display:inline-block;padding:6px 16px;background:#e8f5e9;color:#2e7d32;border-radius:20px;font-size:14px;font-weight:500;margin-bottom:16px}h1[_ngcontent-%COMP%]{margin:0 0 12px;font-size:36px;font-weight:600;color:#0f0f0f}.autor[_ngcontent-%COMP%]{margin:0;font-size:16px;color:#606060}.favorito-btn-grande[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 24px;border:2px solid #606060;background:#fff;border-radius:30px;cursor:pointer;font-size:14px;font-weight:500;transition:all .2s;white-space:nowrap}.favorito-btn-grande[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}.favorito-btn-grande.favorito-activo[_ngcontent-%COMP%]{border-color:red;color:red}.favorito-btn-grande[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px}.tiempo-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:16px 24px;background:#f0f7ff;border-radius:12px;color:#065fd4;font-size:18px;font-weight:500;margin-bottom:40px}.tiempo-info[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:28px;height:28px}.detalle-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:48px}.section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 24px;font-size:28px;font-weight:600;color:#0f0f0f}.ingredientes-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;display:grid;gap:12px}.ingredientes-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px;background:#f9f9f9;border-radius:8px;font-size:16px;line-height:1.6}.ingredientes-list[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;color:#2e7d32;flex-shrink:0}.pasos-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;counter-reset:step-counter;display:flex;flex-direction:column;gap:24px}.pasos-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;gap:20px;counter-increment:step-counter}.paso-numero[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;background:#065fd4;color:#fff;border-radius:50%;font-weight:600;font-size:18px;flex-shrink:0}.pasos-list[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;padding-top:8px;font-size:16px;line-height:1.8;color:#0f0f0f}.acciones[_ngcontent-%COMP%]{display:flex;gap:16px;margin-top:48px;padding-top:32px;border-top:2px solid #e5e5e5}.btn-editar[_ngcontent-%COMP%], .btn-eliminar[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;gap:8px;padding:14px 24px;border:none;border-radius:10px;font-size:16px;font-weight:500;cursor:pointer;transition:all .2s}.btn-editar[_ngcontent-%COMP%]{background:#e3f2fd;color:#1976d2}.btn-editar[_ngcontent-%COMP%]:hover{background:#bbdefb;transform:translateY(-2px)}.btn-eliminar[_ngcontent-%COMP%]{background:#ffebee;color:#d32f2f}.btn-eliminar[_ngcontent-%COMP%]:hover{background:#ffcdd2;transform:translateY(-2px)}.btn-editar[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .btn-eliminar[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.loading[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:400px;font-size:18px;color:#606060}@media (max-width: 768px){.detalle-header[_ngcontent-%COMP%]{flex-direction:column}h1[_ngcontent-%COMP%]{font-size:28px}.acciones[_ngcontent-%COMP%]{flex-direction:column}}"]})};export{H as DetalleRecetaComponent};
